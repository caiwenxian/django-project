
<!DOCTYPE html>
<html lang="en" style="height: 100%">
<head>
    <meta charset="UTF-8">
    <title>home</title>
    <style>
        .main {
            height: 100%
        }
        .main-left{
            width: 300px;
            height: 100%;
            float: left;
        }
        .main-right{
            margin-left: 300px;
            height: 100%;
            background-color: #eaeaea;
        }
        .none {
            display: none;
        }
        .block {
            display: block;
        }
        .frame {
            height: 100%;
            width: 100%;
            border: none;
        }
        .hover-opacity:hover {
            opacity: 0.5;
        }
        .cursor-pointer {
            cursor: pointer;
        }
        .user-info a {
            text-decoration: none;
            color: #999;
        }
    </style>
</head>

<body style="height: 100%; margin: 0px;">
<div class="main">
    <div class="main-left">
        <div style="height: 19%; background-color: #4d4d4d"></div>
        <div style="height: 10%; position: relative; margin-top: -50px; margin-left: 100px;">
            <img src="/static/blogs/images/pic-1001.jpg" style="height: 100px; border-radius: 50%;">
            {% comment %}<form action="/blogs/upload/photo" method="post" enctype="multipart/form-data">
                <br />{% csrf_token %}<br />
                <input type='text' name='textfield' id='textfield' class='txt' />
                <input type='button' class='btn' value='浏览...' />
                <input type="file" name="fileField" class="file" id="fileField" size="28" onchange="document.getElementById('textfield').value=this.value" />
                <input type="submit" name="submit" class="btn" value="上传" onclick=""/>
            </form>{% endcomment %}
            <form method="post" enctype="multipart/form-data" action="/blogs/upload/photo">
                {% comment %}<div class="fieldWrapper">
                    {{ field.errors }}
                    {{ field.label_tag }} {{ field }}
                </div>{% endcomment %}
                <br />{% csrf_token %}<br />
                <p><input type="file" name="up_file"></p>
                <input type="submit">
            </form>
        </div>
        <div class="user-info" style="text-align: center">
            <p class="hover-opacity cursor-pointer" style="font-family: fantasy; margin-top: 55px">Mr.miss</p>
            <p style="margin-top: 55px; color: #999">言念君子，温其如玉</p>
            <div class="model-list" style="margin-top: 70px; color: #999">
                <p class="hover-opacity cursor-pointer" onclick="goModel('index', true)">主页</p>
                {% if user.is_authenticated %}
                    <p class="hover-opacity cursor-pointer manage" onclick="goModel('publish')">发布</p>
                    <p class="hover-opacity cursor-pointer manage" onclick="goModel('manage')">管理</p>
{#                    <span class="cursor-pointer none" style="font-size: 14px;">发布</span>#}
{#                    <span class="cursor-pointer none" style="font-size: 14px;">管理</span>#}
                {% endif %}
                <p class="hover-opacity cursor-pointer" onclick="goModel('about')">关于</p>
            </div>
        </div>
    </div>
    <div class="main-right">
        <iframe id="frame-article" class="frame" src="" ></iframe>
{#        <iframe class="frame none" src="/blogs/photo"></iframe>#}
    </div>
</div>
</body>
<script src="/static/blogs/js/vue.min.js"></script>
<script src="/static/blogs/js/jquery.min.js"></script>
<script>
    $(function () {
        $('.manage').click(function () {
            $('.manage').children().addClass('block').removeClass('none')
        })

        goModel('index', false)
    })

    function goModel(type, flag) {
        if(type == 'index') {
            if (flag) {
                $('#frame-article').attr('src', '/blogs/article')
                var u = parent.location.href
                var end = u.indexOf("#");
                if (end != -1) {
                   parent.location.href = u.substring(0, end);
                }

                return
            }
            var page = 1
            var u = parent.location.href
            var end = u.indexOf("#");
            if (end != -1) {
               page = u.substring(end + 1, u.length);
            }
            // var cookie = document.cookie
            // if(cookie != '') {
            //     page = getCookie('page')
            // }
            $('#frame-article').attr('src', '/blogs/article?page=' + page)
        }
    }

    //获取cookie
    function getCookie(name) {
        if (document.cookie.length>0) {
            start=document.cookie.indexOf(name + "=")//返回某指定值在字符串中首次出现的位置。
            if (start!=-1) {
                start = start + name.length+1;
                end=document.cookie.indexOf(";",start)//返回';'在字符串中首次出现的位置。
                if (end ==-1) {
                    end = document.cookie.length;
                    return document.cookie.substring(start,end);
                }
            }
        }return ""
    }

</script>
</html>